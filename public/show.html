<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>작가처럼 글하자</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../assets/favicon.ico" />

    <link href="../node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
  </head>
  <body><!-- Image and text -->

    <div class="navbar box-shadow">
      <div class="container d-flex justify-content-between">
        <a href="#" class="navbar-brand d-flex align-items-center">
          <img src="../assets/img/new_main_logo2.png" width="250px;" class="align-items-center">
        </a>
        <div class="align-items-center"><strong style="font-size: 40px;" id="writeId"></strong></div>
        <div style="width: 250px;">
          <button style="float: right;" class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
      </div>
    </div>
    
    <hr />

    <!--<div class="container-fluid">-->
    <div class="container-fluid">
      <div class="row" style="width: 100%;">
        
        <div class="col-2">
          <div class="list-group">
            <a href="#" class="list-group-item">
              <h4 class="list-group-item-heading" id="title"></h4>
              <p class="list-group-item-text">
                작가 : <span id="writer"></span>
              </p>
              <p class="list-group-item-text">
                <span id="affilication"></span> <span id="grade"></span>
              </p>
            </a>
          </div>
          <hr />
          <div class="list-group">
            <canvas id="pdf-cover"></canvas>
          </div>
        </div>

        <div class="col-10 list-group">
          <canvas id="pdf-page"></canvas>
        </div>
      </div>

      
    </div>
    <script type="text/javascript" src="../node_modules/jquery/dist/jquery.js"></script>
    <script src="../node_modules/bootstrap/dist/js/bootstrap.bundle.js"></script>
    <script src="../node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    <script src="readPdf.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        getConf();
      });

      function getConf() {
        
        $.ajax({
          type:"GET",
          dataType:"JSON",
          url:"/conf/get",
          success: function (ret) {
            intervalInSeconds = ret[0].PAGE_INTERVAL;
            coverScale = ret[0].COVER_SCALE;
            pageScale = ret[0].PAGE_SCALE;
            getEbookList();
          }
        });
      }

      function getEbookList() {
        $.ajax({
          type: "GET",
          dataType: "JSON",
          url: "/ebook/select",
          success: function (ret) {
            data = JSON.parse(JSON.stringify(ret));
            showPDF(data);
          },
        });
      }
    </script>
    
  </body>
</html>
